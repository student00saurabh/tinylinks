<% layout("/layouts/boilerplate") -%>

<div class="min-h-screen bg-gray-100 p-6">

  <div class="max-w-xl mx-auto bg-white shadow-lg rounded-xl p-6 border mt-10">
    <h1 class="text-2xl font-bold text-center text-green-700 mb-6">ðŸ“Š Link Statistics</h1>

    <div class="space-y-3 text-gray-700">
      <p><strong>Short Code:</strong> <%= link.shortId %></p>

      <p>
        <strong>Target URL:</strong>
        <a href="<%= link.fullURL %>" target="_blank" class="text-blue-600 underline">
          <%= link.fullURL %>
        </a>
      </p>

      <p><strong>Total Clicks:</strong> <%= link.clicks %></p>
      <p><strong>Last Clicked:</strong> <%= link.lastClicked ? link.lastClicked.toLocaleString() : "Never" %></p>
      <p><strong>Created:</strong> <%= link.createdAt.toLocaleString() %></p>

      <p><strong>Short Link:</strong>
        <span class="font-mono text-blue-700"><%= process.env.BASE_URL %>/<%= link.shortId %></span>
      </p>
    </div>

    <div class="mt-6 flex flex-col gap-3">
      <button onclick="navigator.clipboard.writeText('<%= process.env.BASE_URL %>/<%= link.shortId %>')"
        class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">
        ðŸ“‹ Copy Short Link
      </button>

      <a href="/" class="w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 text-center transition">
        â¬… Back to Dashboard
      </a>

      <form action="/api/links/<%= link.shortId %>?_method=DELETE" method="POST"
        onsubmit="return confirm('Delete this link permanently?')">
        <button class="w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition">
          ðŸ—‘ Delete Link
        </button>
      </form>
    </div>
  </div>
</div>


